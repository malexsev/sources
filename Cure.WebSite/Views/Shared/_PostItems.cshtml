@using Cure.WebSite.Models
@model ChildVisualDetailed

@foreach (PostModel postModel in Model.PostItemList)
{
    <div class="child-tab-post">
        @Html.Partial("_PostItem", postModel)
    </div>

    <div class="comments post-comments">
        <div class="comments-head">
            <a class="comments-count js-comments-open" role="button">@postModel.Comments.Count</a>
        </div>
        <div class="comments-body post-comments-body">
            <div class="comments-title">Комментарии (@postModel.Comments.Count)</div>

            @foreach (PostModel comment in postModel.Comments.OrderBy(x => x.CreateDate))
            {
                @Html.Partial("_PostCommentItem", comment)
            }

            @if (User.Identity.IsAuthenticated)
            {
                <div class="comments-addform">
                    @Html.Partial("_PostAdd", postModel.Id)
                </div>
            }

        </div>
    </div>
}